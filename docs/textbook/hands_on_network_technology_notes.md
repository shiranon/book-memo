# 体験しながら学ぶ ネットワーク技術入門

## 本

- [体験しながら学ぶ ネットワーク技術入門](https://www.sbcr.jp/product/4815618599/)

## かかった時間

- 4h

## 進め方

- 適度にメモを取りつつ進める

## 感想

- まだ

## 読書メモ

### 環境構築について

- windows環境でやる為にwslで作られている
- Ubuntu 20.04のdistributionを新しくインストールして始める事にした
- 準備されているshellscriptで殆どの環境を一発で作れるようになっているので楽だが後でスクリプトの中身は見たほうがいいかも

### Chapter 1

- 環境構築と動作確認をした
- 章の途中でわからなくなったらspec_0x.yamlの設定を見る
- ネットワーク構成図
![構成画像](/src/hands_on_network_technology_notes/spec_01.png)

### Chapter 2

#### 2-1

- sw1(L2スイッチ)
  - 家庭内LANを構成するL2スイッチ
  - port1からport4が用意されている
  - 1~3はPC(cl1,cl2,cl3)のNIC(net0)
  - 4にはブロードバンドルーターのインターフェース(net1)が接続されている
  - **理解しやすくするためスイッチとルーターが分離されている**

- sw2(L2スイッチ)
  - サーバーサイドのLANを構成するL2スイッチ
  - port1からport4が用意されている
  - 1~2はサーバー(sv1,sv2)のNIC(net0)
  - 3は負荷分散装置(lb1)のインターフェース(net0)
  - 4はファイアウォールのインターフェース(net1)
  - **物理構成をシンプルにする為にsw2がサーバーのど真ん中にあり、fw1,lb1,sv1,sv2にそれぞれ一本足に配線されている**

#### 2-2

- 単語
  - MACアドレス
  - イーサネット
  - Wi-Fi(IEEE802.11で定義)

##### イーサネット

イーサネットではどの様なフォーマットでカプセル化を行い、どのようにしてエラーを検知するのかが定義されている

- 単語
  - イーサネットフレーム
  - イーサネット(イーサネットⅡ)
- **イーサネットを構成する5つのフィールド**
  - イーサネットヘッダー
   1 プリアンブル
   2 宛先/送信元MACアドレス
   3 タイプ
   4 イーサネットペイロード
  - イーサネットトレーラー
   5 FCS(Frame Check Secpuence)

- プリアンブル
イーサネットを送るという合図する8byte(64bit)のビットパターン

- 宛先/送信元MACアドレス
イーサネットネットワークに接続している端末を識別する6byte(48bit)のID

- タイプ
ネットワーク層(L3)で使用されているプロトコルを表す2byte(16bit)のID

- イーサネットペイロード
ネットワーク層にデータそのもの

- FCS
イーサネットフレームが壊れていないかを確認するためにある4byte(32bit)のフィールド

##### MACアドレス

LANに接続している端末の識別ID

- ユニキャストアドレス
1:nの通信
- マルチキャストアドレス
1:1の通信
- ブロードキャストアドレス (ff:ff:ff:ff:ff)
同じLANに接続するすべての端末

##### イーサネット実践

- 使用ツール
  - 「tcpdump」
  パケットをキャプチャ
  - 「Wireshark」
  パケットを解析

- ifconfig net0
cl1のMACアドレスは末尾が01,cl2のMACアドレスは末尾が02  
(解説の整合性の為にtinetで設定されているらしい)  

- cl1からcl2にリクエストパケットを2回送信する
- キャプチャしたパケット
![Wireshark](/src/hands_on_network_technology_notes/wireshark_01.png)

#### ARP(Address Resolution Protocol)

MACアドレスとIPアドレスを紐づけ、データリンク層とネットワーク層の架け橋的な役割を担っている。

- アドレス解決
実際のデータ通信に先立って、ARPでIPアドレスアドレスから宛先MACアドレスを求める事。

- ARPのフレームフォーマット
以下で構成されているらしい  
ハードウェア対応  
プロトコルタイプ  
ハードウェアアドレスサイズ  
プロトコルアドレスサイズ  
オペレーションコード  
送信元MACアドレス/送信元IPアドレス  
目標MACアドレス/目標IPアドレス  

- ARPによるアドレス解決の流れ
今回のネットワークではcl3がPCに、rt1が同じ家庭内LANのブロードバンドルーターに相当する。  

##### ARP実践

- ip neighコマンド
ARPテーブルの情報の確認や操作ができる。

#### L2スイッチング
